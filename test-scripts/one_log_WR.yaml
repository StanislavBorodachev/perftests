log:
  level: info
tests:
  Append to 1 logs then read it:
    name: Append to 1 logs then read it
    scenario:
      name: sequence
      config:
        skipErrors: false
        steps:
          - name: cluster.connect
            config:
              address: localhost:50051
              envVarAddress: PERFTESTS_SOLARIS_ADDRESS
              envRunID: PERFTESTS_RUN_ID
          - name: sequence
            config:
              skipErrors: false
              steps:
                - name: solaris.connect
                  config:
                    address: localhost:50051
                    envVarAddress: PERFTESTS_SOLARIS_ADDRESS
                - name: solaris.metrics
                  config:
                    cmds:
                      - init
                - name: repeat
                  config:
                    period: ""
                    count: 1
                    action:
                      name: sequence
                      config:
                        skipErrors: false
                        steps:
                          - name: solaris.createLog
                            config:
                              tags:
                                logName: foo
                          - name: repeat
                            config:
                              period: ""
                              count: 1
                              action:
                                name: repeat
                                config:
                                  period: ""
                                  count: 10000
                                  action:
                                    name: solaris.append
                                    config:
                                      messageSize: 1024
                                      batchSize: 1
                                  executor: sequence
                                  skipErrors: false
                              executor: parallel
                              skipErrors: false
                          - name: repeat
                            config:
                              period: ""
                              count: 1
                              action:
                                name: solaris.queryMsgs
                                config:
                                  step: 100
                                  number: -1
                              executor: parallel
                              skipErrors: false
                          - name: solaris.deleteLog
                            config: null
                    executor: parallel
                    skipErrors: false
                - name: solaris.metrics
                  config:
                    cmds:
                      - append
                      - queryRecords
          - name: cluster.finish
            config:
              await: true
          - name: cluster.delete
            config: null
